<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Urdu/Hindi Text to Speech with Download</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        .input-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 18px;
            font-family: 'Segoe UI', 'Nafees', 'Jameel Noori Nastaleeq', sans-serif;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }
        
        .value-display {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .voice-selector {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }
        
        button {
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-speak {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        
        .btn-record {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
            color: white;
        }
        
        .btn-stop {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .download-section {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #4CAF50;
            text-align: center;
            display: none;
        }
        
        .download-section h4 {
            color: #2E7D32;
            margin-bottom: 10px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #666;
            border-top: 1px solid #e0e0e0;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            display: none;
        }
        
        .recording {
            background: #fff3e0;
            color: #e65100;
        }
        
        .ready {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            
            .button-group {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🗣️ اردو/हिन्दी ٹیکسٹ ٹو اسپیچ</h1>
            <p>اپنا متن لکھیں، سنیں اور ڈاؤنلوڈ کریں | अपना टेक्स्ट लिखें, सुनें और डाउनलोड करें</p>
        </div>
        
        <div class="content">
            <div class="input-section">
                <h3>📝 اپنا متن یہاں لکھیں | अपना टेक्स्ट यहाँ लिखें:</h3>
                <textarea id="textInput" placeholder="مثال: السلام علیکم | उदाहरण: नमस्ते..."></textarea>
            </div>
            
            <div class="controls">
                <div class="control-group">
                    <label>🎵 آواز کی رفتار | वॉयस स्पीड:</label>
                    <div class="slider-container">
                        <input type="range" id="rate" min="0.5" max="2" value="1" step="0.1">
                        <span class="value-display" id="rateValue">1</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>🎤 آواز کی پچ | वॉयस पिच:</label>
                    <div class="slider-container">
                        <input type="range" id="pitch" min="0.5" max="2" value="1" step="0.1">
                        <span class="value-display" id="pitchValue">1</span>
                    </div>
                </div>
                
                <select id="languageSelect" class="voice-selector">
                    <option value="ur-PK">اردو (Urdu)</option>
                    <option value="hi-IN">ہندی (Hindi)</option>
                    <option value="en-US">انگریزی (English)</option>
                </select>
            </div>
            
            <div id="status" class="status"></div>
            
            <div class="button-group">
                <button class="btn-speak" onclick="speakText()">
                    <span>▶️</span> بولنا | बोलना
                </button>
                <button class="btn-record" id="recordBtn" onclick="toggleRecording()">
                    <span>⏺️</span> ریکارڈ کریں | रिकॉर्ड करें
                </button>
            </div>
            
            <div class="download-section" id="downloadSection">
                <h4>✅ آڈیو تیار ہے! | ऑडियो तैयार है!</h4>
                <audio id="recordedAudio" controls style="width: 100%; margin: 10px 0;"></audio>
                <br>
                <button onclick="downloadAudio()" style="background: #4CAF50; color: white; padding: 12px 24px; border: none; border-radius: 8px; margin: 10px;">
                    <span>💾</span> آڈیو ڈاؤنلوڈ کریں | ऑडियो डाउनलोड करें
                </button>
            </div>
            
            <div class="language-info" style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin-top: 20px;">
                <h4>💡 ہدایات | निर्देश:</h4>
                <p>1. متن لکھیں اور "بولنا" بٹن دبائیں</p>
                <p>2. "ریکارڈ کریں" بٹن دبائیں - یہ آواز ریکارڈ کرے گا</p>
                <p>3. آڈیو ڈاؤنلوڈ کرنے کے لیے ڈاؤنلوڈ بٹن استعمال کریں</p>
            </div>
        </div>
        
        <div class="footer">
            <p>🚀 مفت اردو/हिन्दी ٹیکسٹ ٹو اسپیچ ٹول | Free Urdu/Hindi Text to Speech Tool</p>
        </div>
    </div>

    <script>
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;
        let recordedAudioUrl = null;

        // Update slider values
        document.getElementById('rate').addEventListener('input', function() {
            document.getElementById('rateValue').textContent = this.value;
        });
        
        document.getElementById('pitch').addEventListener('input', function() {
            document.getElementById('pitchValue').textContent = this.value;
        });

        // Browser built-in speech
        function speakText() {
            const text = document.getElementById('textInput').value.trim();
            if (text === '') {
                alert('📝 براہ کرم متن درج کریں | कृपया टेक्स्ट दर्ज करें');
                return;
            }

            const speech = new SpeechSynthesisUtterance();
            speech.text = text;
            speech.rate = parseFloat(document.getElementById('rate').value);
            speech.pitch = parseFloat(document.getElementById('pitch').value);
            speech.lang = document.getElementById('languageSelect').value;
            
            window.speechSynthesis.speak(speech);
        }

        // Audio recording function
        async function toggleRecording() {
            const text = document.getElementById('textInput').value.trim();
            if (text === '') {
                alert('📝 پہلے متن درج کریں | पहले टेक्स्ट दर्ज करें');
                return;
            }

            if (!isRecording) {
                // Start recording
                try {
                    showStatus('⏺️ ریکارڈنگ شروع ہو رہی ہے... | रिकॉर्डिंग शुरू हो रही है...', 'recording');
                    
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        audio: {
                            echoCancellation: true,
                            noiseSuppression: true,
                            sampleRate: 44100
                        } 
                    });
                    
                    mediaRecorder = new MediaRecorder(stream, {
                        mimeType: 'audio/webm;codecs=opus'
                    });
                    
                    audioChunks = [];

                    mediaRecorder.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            audioChunks.push(event.data);
                        }
                    };

                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                        
                        // Convert to WAV for better compatibility
                        recordedAudioUrl = URL.createObjectURL(audioBlob);
                        
                        const audioElement = document.getElementById('recordedAudio');
                        audioElement.src = recordedAudioUrl;
                        
                        document.getElementById('downloadSection').style.display = 'block';
                        showStatus('✅ آڈیو تیار ہے! ڈاؤنلوڈ کریں | ऑडियो तैयार है! डाउनलोड करें', 'ready');
                        
                        // Stop all tracks
                        stream.getTracks().forEach(track => track.stop());
                    };

                    mediaRecorder.start();
                    isRecording = true;
                    document.getElementById('recordBtn').innerHTML = '<span>⏹️</span> ریکارڈنگ روکیں | रिकॉर्डिंग रोकें';
                    document.getElementById('recordBtn').className = 'btn-stop';
                    
                    showStatus('🎤 ریکارڈنگ جاری ہے... بولنا شروع کریں | रिकॉर्डिंग चल रही है... बोलना शुरू करें', 'recording');
                    
                    // Auto start speaking
                    setTimeout(() => {
                        speakText();
                    }, 1000);
                    
                } catch (error) {
                    console.error('Recording error:', error);
                    showStatus('❌ مائیکروفون کی اجازت درکار ہے | माइक्रोफोन अनुमति आवश्यक', 'recording');
                }
            } else {
                // Stop recording
                if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                    mediaRecorder.stop();
                    isRecording = false;
                    document.getElementById('recordBtn').innerHTML = '<span>⏺️</span> ریکارڈ کریں | रिकॉर्ड करें';
                    document.getElementById('recordBtn').className = 'btn-record';
                }
            }
        }

        function downloadAudio() {
            if (recordedAudioUrl) {
                const a = document.createElement('a');
                a.href = recordedAudioUrl;
                a.download = `urdu_hindi_speech_${Date.now()}.webm`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                showStatus('💾 آڈیو ڈاؤنلوڈ ہو گئی! | ऑडियो डाउनलोड हो गई!', 'ready');
            }
        }

        function showStatus(message, type) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
            statusElement.style.display = 'block';
        }

        // Initialize
        showStatus('✅ ٹول تیار ہے | टूल तैयार है', 'ready');
    </script>
</body>
</html>
